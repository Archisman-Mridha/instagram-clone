extend schema
  @link(url: "https://grafbase.com/extensions/grpc/0.1.0", import: ["@protoServices", "@protoEnums", "@protoMessages", "@grpcMethod"])
  @protoServices(
    definitions: [
      {
        name: "microservices.profiles.ProfilesService"
        methods: [
          {
            name: "Ping"
            inputType: ".google.protobuf.Empty"
            outputType: ".google.protobuf.Empty"
          }
          {
            name: "SearchProfiles"
            inputType: ".microservices.profiles.SearchProfilesRequest"
            outputType: ".microservices.profiles.SearchProfilesResponse"
          }
          {
            name: "GetProfilePreviews"
            inputType: ".microservices.profiles.GetProfilePreviewsRequest"
            outputType: ".microservices.profiles.GetProfilePreviewsResponse"
          }
        ]
      }
    ]
  )
  @protoMessages(
    definitions: [
      {
        name: ".google.protobuf.Empty"
        fields: [
        ]
      }
      {
        name: ".microservices.profiles.ProfilePreview"
        fields: [
          {
            name: "id"
            number: 1
            repeated: false
            type: "int32"
          }
          {
            name: "name"
            number: 2
            repeated: false
            type: "string"
          }
          {
            name: "username"
            number: 3
            repeated: false
            type: "string"
          }
        ]
      }
      {
        name: ".microservices.profiles.PaginationArgs"
        fields: [
          {
            name: "offset"
            number: 1
            repeated: false
            type: "uint64"
          }
          {
            name: "page_size"
            number: 2
            repeated: false
            type: "uint64"
          }
        ]
      }
      {
        name: ".microservices.profiles.SearchProfilesRequest"
        fields: [
          {
            name: "query"
            number: 1
            repeated: false
            type: "string"
          }
          {
            name: "pagination_args"
            number: 2
            repeated: false
            type: ".microservices.profiles.PaginationArgs"
          }
        ]
      }
      {
        name: ".microservices.profiles.SearchProfilesResponse"
        fields: [
          {
            name: "profile_previews"
            number: 1
            repeated: true
            type: ".microservices.profiles.ProfilePreview"
          }
        ]
      }
      {
        name: ".microservices.profiles.GetProfilePreviewsRequest"
        fields: [
          {
            name: "ids"
            number: 1
            repeated: true
            type: "int32"
          }
        ]
      }
      {
        name: ".microservices.profiles.GetProfilePreviewsResponse"
        fields: [
          {
            name: "profile_previews"
            number: 1
            repeated: true
            type: ".microservices.profiles.ProfilePreview"
          }
        ]
      }
    ]
  )

type Mutation {
  microservices_profiles_ProfilesService_Ping(input: EmptyObject): EmptyObject @grpcMethod(service: "microservices.profiles.ProfilesService", method: "Ping")
  microservices_profiles_ProfilesService_SearchProfiles(input: microservices_profiles_SearchProfilesRequestInput): microservices_profiles_SearchProfilesResponse @grpcMethod(service: "microservices.profiles.ProfilesService", method: "SearchProfiles")
  microservices_profiles_ProfilesService_GetProfilePreviews(input: microservices_profiles_GetProfilePreviewsRequestInput): microservices_profiles_GetProfilePreviewsResponse @grpcMethod(service: "microservices.profiles.ProfilesService", method: "GetProfilePreviews")
}

"64 bit signed integer" scalar I64
"64 bit unsigned integer" scalar U64

"An empty object " scalar EmptyObject

"""
A generic empty message that you can re-use to avoid defining duplicated
 empty messages in your APIs. A typical example is to use it as the request
 or the response type of an API method. For instance:

     service Foo {
       rpc Bar(google.protobuf.Empty) returns (google.protobuf.Empty);
     }
"""
input google_protobuf_EmptyInput {
}

input microservices_profiles_PaginationArgsInput {
  offset: U64
  page_size: U64
}

input microservices_profiles_SearchProfilesRequestInput {
  query: String
  pagination_args: microservices_profiles_PaginationArgsInput
}

input microservices_profiles_GetProfilePreviewsRequestInput {
  ids: [Int!]
}

"An empty object " scalar EmptyObject

"""
A generic empty message that you can re-use to avoid defining duplicated
 empty messages in your APIs. A typical example is to use it as the request
 or the response type of an API method. For instance:

     service Foo {
       rpc Bar(google.protobuf.Empty) returns (google.protobuf.Empty);
     }
"""
type google_protobuf_Empty {
}

type microservices_profiles_ProfilePreview {
  id: Int
  name: String
  username: String
}

type microservices_profiles_SearchProfilesResponse {
  profile_previews: [microservices_profiles_ProfilePreview!]
}

type microservices_profiles_GetProfilePreviewsResponse {
  profile_previews: [microservices_profiles_ProfilePreview!]
}
